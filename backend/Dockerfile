ARG JDK_VERSION="17-jdk-alpine"

# ======================================================================================================================
# Build
# ======================================================================================================================

FROM eclipse-temurin:${JDK_VERSION} AS build

WORKDIR /app

COPY . .

RUN ./gradlew --info build

# ======================================================================================================================
# Server
# ======================================================================================================================

FROM eclipse-temurin:${JDK_VERSION}

COPY --from=build /app/build/libs/maprobe.jar .

ENTRYPOINT ["java", "-jar", "./maprobe.jar"]
